<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>The TokTok Project - TokTok project plan</title>
  <meta name="description" content="This is the original TokTok project plan. Its original goals remain the same,but the actual roadmap has been adapted to situational changes. We keep thisdocu...">
  <link rel="canonical" href="https://toktok.ltd/designs/plan.html">

  
  
  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <link rel="stylesheet" href="../static/css/bootstrap.css" media="screen">
  <link rel="stylesheet" href="../static/css/style.css" media="screen">

  
</head>

  <body>
    <nav class="navbar">
  <div class="container-fluid limit-width">
    <div class="navbar-header">
      <a class="navbar-brand" href="../index.html">
        <span class="fab fa-earlybirds"></span>
        <span class="text">TokTok</span>
      </a>
      <input type="checkbox" id="hambox" class="navbar-toggle collapsed">
      <label id="hamlabel" class="navbar-toggle collapsed fas fa-bars" for="hambox"></label>
      <div class="tinynav navbar-toggle collapsed">
        <ul class="nav navbar-nav">
         

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
  <li>
    <a href="../mission.html">
      <span class="fas fa-align-left">&nbsp;</span>
      Mission
    </a>
  </li>
  

  
  <li>
    <a href="../pulls.html">
      <span class="fas fa-code-branch">&nbsp;</span>
      Pull Requests
    </a>
  </li>
  

  
  <li>
    <a href="../spec.html">
      <span class="fas fa-book">&nbsp;</span>
      Protocol
    </a>
  </li>
  

  
  <li>
    <a href="../documents.html">
      <span class="fas fa-file-alt">&nbsp;</span>
      Documents
    </a>
  </li>
  

  
  <li>
    <a href="../integrations.html">
      <span class="fas fa-list-ul">&nbsp;</span>
      Integrations
    </a>
  </li>
  

<li>
  <a href="https://tox.chat">
    <span class="fas fa-lock">&nbsp;</span>
    Tox
  </a>
</li>

        </ul>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
  <li>
    <a href="../mission.html">
      <span class="fas fa-align-left">&nbsp;</span>
      Mission
    </a>
  </li>
  

  
  <li>
    <a href="../pulls.html">
      <span class="fas fa-code-branch">&nbsp;</span>
      Pull Requests
    </a>
  </li>
  

  
  <li>
    <a href="../spec.html">
      <span class="fas fa-book">&nbsp;</span>
      Protocol
    </a>
  </li>
  

  
  <li>
    <a href="../documents.html">
      <span class="fas fa-file-alt">&nbsp;</span>
      Documents
    </a>
  </li>
  

  
  <li>
    <a href="../integrations.html">
      <span class="fas fa-list-ul">&nbsp;</span>
      Integrations
    </a>
  </li>
  

<li>
  <a href="https://tox.chat">
    <span class="fas fa-lock">&nbsp;</span>
    Tox
  </a>
</li>

      </ul>
    </div>
  </div>
</nav>

    <section id="content">
      <div class="container-fluid limit-width lead">
        <p>This is the original TokTok project plan. Its original goals remain the same,
but the actual roadmap has been adapted to situational changes. We keep this
document around for reference.</p>

<h2 id="objective">Objective</h2>

<p>Following a step plan will involve making compromises. People understandably
want to work on exciting new features much more than on making a stable basis
for future development. It is now time to pay our technical debt and clean
things up. After paying this price, we will be able to move forward more
quickly, and to attract more contributors.</p>

<h3 id="goals">Goals</h3>

<ul>
  <li>Focus: avoid thinly spreading our scarce human resources, focus on a
single goal and put all the resources behind that.</li>
  <li>Step plan: avoid getting distracted by future plans and focus on what’s
directly ahead of us. Write down thoughts about future plans, but don’t
execute until we reach their time.</li>
  <li>We want to push the development of a single client for a while, to get
that client to a state where its code can be considered high quality and
its user experience is satisfactory.</li>
</ul>

<h3 id="non-goals">Non-goals</h3>

<ul>
  <li>Rewrite toxcore. We don’t have the resources to do this project at this
time. It is not off the map, but won’t be a focus point.</li>
  <li>Discontinue all clients except one. Pushing a single client does not mean
abandoning all others, but their development will be reduced temporarily.</li>
</ul>

<h2 id="phases">Phases</h2>

<p>The project plan is split into phases. In each phase, we follow a slightly
different development process, adjusted to the available tools and resources.</p>

<h3 id="common">Common</h3>

<p>The following guidelines are the same in all phases:</p>

<ul>
  <li>Team members make pull requests (PRs) early in their development process.
This signals to others that they are working on something. It also runs
the Travis CI on every change, so development can go paired with
continuous testing.</li>
  <li>Once the author feels their PR is ready for review, they assign it to a
reviewer of their choice.</li>
  <li>The number of lines changed in a PR should not exceed 300. If it is a
larger change, it should be broken into separate PRs. It won’t be possible
to guarantee that every PR adds direct value, but in general, they should.</li>
  <li>Each PR should be few commits, ideally one, so it can easily be rolled
back if necessary.</li>
  <li>The commit message should be descriptive of what the change is trying to
achieve. Mention Github issue numbers if they are related.</li>
  <li>Every PR to the core and client repositories must have at least one
reviewer that is not the PR author.</li>
  <li>HEAD of master should always be a signed commit.</li>
</ul>

<h3 id="phase-1-establishing-a-basis">Phase 1: Establishing a basis</h3>

<p>In phase 1, we assume a young team of people who haven’t worked together much
before.</p>

<ul>
  <li>Each repository has only a master branch.</li>
  <li>The repository has exactly one owner who can push to the master branch to
merge PRs. The owner can not push unreviewed changes. No team members
except the owner can merge PRs.</li>
  <li>The hstox repository contains the specification source in LaTeX (literate
Haskell) format. Text reviews are done on the spec repository.</li>
</ul>

<h4 id="tasks-for-phase-1">Tasks for phase 1</h4>

<ul>
  <li>toxcore
    <ul>
      <li>(P1) Fix the current test failures and enable continuous testing on
Travis.</li>
      <li>(P2) Fetch the test suite from git as of 4 weeks ago and build/run
against the current code to ensure support horizon compliance.</li>
      <li>(P2) Fetch hstox master, build it against toxcore, and run its test
suite.</li>
      <li>(P3) Fetch client master, build it against toxcore, and run its test
suite.</li>
    </ul>
  </li>
  <li>client
    <ul>
      <li>(P1) Split out logic and data models from the UI code.</li>
      <li>(P1) Write unit tests against logic code.</li>
      <li>(P2) Expose msgpack-rpc interface for logic code to allow testing
through the hstox test suite.</li>
      <li>(P2) Add automated GUI tests using a user interface testing framework
(e.g. dogtail).</li>
    </ul>
  </li>
  <li>hstox
    <ul>
      <li>(P1) Design and implement testing interfaces.</li>
      <li>(P1) Testing interfaces in C, backed by the C toxcore implementation.</li>
      <li>(P2) Improve the afl-fuzz integration.</li>
    </ul>
  </li>
  <li>spec
    <ul>
      <li>(P1) Rewrite the specification as tests are added.</li>
      <li>(P3) Generate parts of the spec from code to ensure up-to-dateness.</li>
    </ul>
  </li>
</ul>

<h3 id="phase-2-stabilising-the-protocol">Phase 2: Stabilising the protocol</h3>

<p>After we have tests in place, we will improve the Tox protocol bit by bit. If
possible, we will do this while observing the support horizon. If it turns out
the protocol must break, we will do it exactly once, and in a major way, to
make the protocol backwards and forwards compatible from then on.</p>

<p>As the team grows more mature, some guidelines can loosen up. As the code
becomes more stable and tested, we can tighten or introduce other guidelines.</p>

<ul>
  <li>The number of owners increases, making it possible for the one owner to
take vacation or be absent sometimes. Owners are trusted team members who
bear the responsibility for keeping up the standards.</li>
  <li>In phase 2, the four projects evolve in lockstep.</li>
</ul>

<h4 id="tasks-for-phase-2">Tasks for phase 2</h4>

<ul>
  <li>toxcore &amp; spec
    <ul>
      <li>(P1) Identify issues with the current protocol.</li>
      <li>(P1) Incrementally improve the protocol.</li>
      <li>(P1) Re-evaluate target use cases and possibly redesign parts of the
protocol to support them.</li>
    </ul>
  </li>
</ul>

<h3 id="phase-3-release-cycles-and-features">Phase 3: Release cycles and features</h3>

<p>By now, we will have a strong testing infrastructure and a 4-week support
horizon. This allows us to make releases, meaning:</p>

<ul>
  <li>Each minor release gets a tag and a branch.</li>
  <li>Each patch release gets a tag.</li>
  <li>Security patches are backported to the last major release.</li>
  <li>The support horizon goes away, and instead we support the two latest major
releases.</li>
  <li>From now on, we can plan for features and start supporting additional
platforms.</li>
  <li>Any features that have not reached maturity in grayhatter’s feature
development fork now need to be pushed to maturity and be merged into the
stable branch. From this moment, collaborative feature development can
occur in branches on the main repository.</li>
  <li>Before a release, we will run afl-fuzz on the test suite, appropriately
seeded with test inputs. This should be able to achieve near 100% coverage
on non-IO code. A complete afl-fuzz is expected to take about 1-3 days,
making that the lower bound of release frequency.</li>
</ul>

      </div>
    </section>
    
    
    
  </body>
  <footer id="footer" class="dark">
  <div class="container-fluid limit-width">
    <div class="languages"></div>

    <div class="ext-med pull-left">
      <a class="button" href="https://github.com/TokTok/c-toxcore" title="Star us on Github"><span class="icon fab fa-github"></span></a>
      <a class="button" href="https://wiki.tox.chat/users/community#irc" title="Chat with us on IRC"><span class="icon fas fa-comments"></span></a>
      <a class="button do-button" href="https://www.digitalocean.com/" title="Powered by DigitalOcean"><img class="button" src="../static/img/do.svg" /></a>
    </div>

    <div class="cc pull-right">
      <a href="http://creativecommons.org/licenses/by-sa/4.0/"><img src="../static/img/CC.png"></a>
      <br>
      <p>This page was generated from
        <a href="https://github.com/TokTok/website">
          a file hosted in public GitHub repository
        </a>
        — issue tickets and pull requests are very welcome!
      </p>
    </div>
  </div>
</footer>

</html>
